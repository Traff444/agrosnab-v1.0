# ะกะธััะตะผะฐ ัะฟัะฐะฒะปะตะฝะธั ะผะฐะณะฐะทะธะฝะพะผ โ ะะฑะทะพั

ะะฒะฐ Telegram-ะฑะพัะฐ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะธะฝัะตัะฝะตั-ะผะฐะณะฐะทะธะฝะพะผ ั ะธะฝัะตะณัะฐัะธะตะน Google Sheets.

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        Google Sheets                            โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ             โ
โ  โ   ะกะบะปะฐะด     โ  โ   ะะฐะบะฐะทั    โ  โ  ะกะฟะธัะฐะฝะธะต   โ             โ
โ  โโโโโโโโฌโโโโโโโ  โโโโโโโโฌโโโโโโโ  โโโโโโโโฌโโโโโโโ             โ
โโโโโโโโโโโผโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโ
          โ                โ                โ
          โผ                โผ                โผ
โโโโโโโโโโโโโโโโโโโ              โโโโโโโโโโโโโโโโโโโ
โ   OWNER BOT     โ              โ    SHOP BOT     โ
โ  @tophitboss_botโ              โ  @agrosna1b_bot โ
โ                 โ              โ                 โ
โ  โข ะัะธัะพะด       โ              โ  โข ะะฐัะฐะปะพะณ      โ
โ  โข ะฃะฟัะฐะฒะปะตะฝะธะต   โโโโโโโโโโโโโโโบโ  โข ะะพัะทะธะฝะฐ      โ
โ  โข ะคะพัะพ         โ   (Sheets)   โ  โข ะะฐะบะฐะทั       โ
โ  โข ะะธะฐะณะฝะพััะธะบะฐ  โ              โ  โข AI-ะผะตะฝะตะดะถะตั  โ
โโโโโโโโโโฌโโโโโโโโโ              โโโโโโโโโโฌโโโโโโโโโ
         โ                                โ
         โผ                                โผ
โโโโโโโโโโโโโโโโโโโ              โโโโโโโโโโโโโโโโโโโ
โ  Google Drive   โ              โ    CDEK API     โ
โ  (ัะพัะพ ัะพะฒะฐัะพะฒ) โ              โ  (ะดะพััะฐะฒะบะฐ)     โ
โโโโโโโโโโโโโโโโโโโ              โโโโโโโโโโโโโโโโโโโ
```

---

## 1. Owner Bot โ ะฃะฟัะฐะฒะปะตะฝะธะต ัะบะปะฐะดะพะผ

**ะะพั:** [@tophitboss_bot](https://t.me/tophitboss_bot)
**ะะผั:** ะฃะฟัะฐะฒะปัััะธะน ะผะฐะณะฐะทะธะฝะฐ
**ะะฐะทะฝะฐัะตะฝะธะต:** ะัะธัะผ ัะพะฒะฐัะพะฒ, ัะฟัะฐะฒะปะตะฝะธะต ะบะฐัะฐะปะพะณะพะผ, ะทะฐะณััะทะบะฐ ัะพัะพ

### ะะพะผะฐะฝะดั

| ะะพะผะฐะฝะดะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `/start` | ะะปะฐะฒะฝะพะต ะผะตะฝั |
| `/health` | ะััััะฐั ะฟัะพะฒะตัะบะฐ ัะธััะตะผั |
| `/cleanup` | ะัะธััะบะฐ ะฒัะตะผะตะฝะฝัั ัะฐะนะปะพะฒ |

### ะคัะฝะบัะธะธ ะณะปะฐะฒะฝะพะณะพ ะผะตะฝั

| ะะฝะพะฟะบะฐ | ะคัะฝะบัะธั |
|--------|---------|
| ๐ฆ ะัะธัะพะด ัะพะฒะฐัะฐ | ะะพะฑะฐะฒะธัั ะฝะพะฒัะน ัะพะฒะฐั ะธะปะธ ะฟะพะฟะพะปะฝะธัั ะพััะฐัะพะบ |
| ๐ ะะฐะนัะธ ัะพะฒะฐั | ะะพะธัะบ ะฟะพ SKU ะธะปะธ ะฝะฐะทะฒะฐะฝะธั |
| ๐ ะะฐะบะฐะทั ัะตะณะพะดะฝั | ะกะฒะพะดะบะฐ ะทะฐะบะฐะทะพะฒ (ะฒ ัะฐะทัะฐะฑะพัะบะต) |
| ๐ง ะกัะฐััั | ะะธะฐะณะฝะพััะธะบะฐ ะฟะพะดะบะปััะตะฝะธะน |

### ะัะธัะพะด ัะพะฒะฐัะฐ โ ะัะพัะตัั

```
1. ะัััััะน ะฒะฒะพะด: "ะะฐัะพัะบะฐ ะกะกะกะ 500 10"
   โ ะะฐะทะฒะฐะฝะธะต: ะะฐัะพัะบะฐ ะกะกะกะ
   โ ะฆะตะฝะฐ: 500 โฝ
   โ ะะพะปะธัะตััะฒะพ: 10 ัั.

2. ะะพะธัะบ ะฟะพัะพะถะธั ัะพะฒะฐัะพะฒ
   โ ะะฐะนะดะตะฝะพ 2 ะฟะพัะพะถะธั: ะฒัะฑัะฐัั ะธะปะธ ัะพะทะดะฐัั ะฝะพะฒัะน

3. ะคะพัะพ ัะพะฒะฐัะฐ
   โ ะะฐะณััะทะธัั / ะัะพะฟัััะธัั / ะััะฐะฒะธัั ัะตะบััะตะต
   โ ะะฝะฐะปะธะท ะบะฐัะตััะฒะฐ (ัะฐะทะผะตั, ัะตะทะบะพััั, ััะบะพััั)
   โ ะะฒัะพัะปัััะตะฝะธะต (ะดะตะฝะพะนะทะธะฝะณ, ะพะฑัะตะทะบะฐ)

4. ะัะตะดะฟัะพัะผะพัั ะธ ะฟะพะดัะฒะตัะถะดะตะฝะธะต
   โ ะะฐะฟะธัั ะฒ Google Sheets
   โ ะะฐะณััะทะบะฐ ัะพัะพ ะฒ Google Drive
```

### ะฃะฟัะฐะฒะปะตะฝะธะต ัะพะฒะฐัะฐะผะธ

- **ะะพะธัะบ**: ะฟะพ SKU (ัะพัะฝัะน) ะธะปะธ ะฝะฐะทะฒะฐะฝะธั (ัะพะดะตัะถะธั)
- **ะะฐััะพัะบะฐ ัะพะฒะฐัะฐ**: SKU, ะฝะฐะทะฒะฐะฝะธะต, ัะตะฝะฐ, ะพััะฐัะพะบ, ััะฐััั, ัะตะณะธ
- **ะะตะนััะฒะธั**:
  - ะัััััะน ะฟัะธัะพะด (+N ัั.)
  - ะะฐะผะตะฝะฐ ัะพัะพ
  - ะะบัะธะฒะฐัะธั/ะดะตะฐะบัะธะฒะฐัะธั (ั ะฟะพะดัะฒะตัะถะดะตะฝะธะตะผ)

### ะะตะทะพะฟะฐัะฝะพััั

- **Whitelist**: ะดะพัััะฟ ัะพะปัะบะพ ะฟะพ Telegram ID ะธะท `OWNER_TELEGRAM_IDS`
- **ะะพะดัะฒะตัะถะดะตะฝะธั**: ะพะฟะฐัะฝัะต ะดะตะนััะฒะธั ััะตะฑััั ะฟะพะฒัะพัะฝะพะณะพ ะฝะฐะถะฐัะธั (TTL 5 ะผะธะฝ)

### ะะฝัะตะณัะฐัะธะธ

| ะกะตัะฒะธั | ะัะฟะพะปัะทะพะฒะฐะฝะธะต |
|--------|---------------|
| Google Sheets | ะฅัะฐะฝะตะฝะธะต ะบะฐัะฐะปะพะณะฐ ัะพะฒะฐัะพะฒ |
| Google Drive | ะฅัะฐะฝะตะฝะธะต ัะพัะพะณัะฐัะธะน |

---

## 2. Shop Bot โ ะะฐะณะฐะทะธะฝ ะดะปั ะฟะพะบัะฟะฐัะตะปะตะน

**ะะพั:** [@agrosna1b_bot](https://t.me/agrosna1b_bot)
**ะะผั:** ะะฐะณะฐะทะธะฝ ะะฐัะพัะบะธ
**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฐัะฐะปะพะณ, ะบะพัะทะธะฝะฐ, ะพัะพัะผะปะตะฝะธะต ะทะฐะบะฐะทะพะฒ

### ะะพะผะฐะฝะดั

| ะะพะผะฐะฝะดะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `/start` | ะัะธะฒะตัััะฒะธะต ะธ ะผะตะฝั |
| `/catalog` | ะะฐัะฐะปะพะณ ัะพะฒะฐัะพะฒ |
| `/cart` | ะะพัะทะธะฝะฐ |
| `/orders` | ะะพะธ ะทะฐะบะฐะทั |
| `/help` | ะะพะผะพัั |

### ะคัะฝะบัะธะธ

#### ะะฐัะฐะปะพะณ
- ะะพัััะฐะฝะธัะฝัะน ะฟัะพัะผะพัั ั ัะพัะพ
- ะคะธะปัััะฐัะธั ะฟะพ ะบะฐัะตะณะพัะธัะผ (ะธะท ัะตะณะพะฒ)
- ะะพะธัะบ ะฟะพ ะฝะฐะทะฒะฐะฝะธั, SKU, ัะตะณะฐะผ
- ะััััะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ะฒ ะบะพัะทะธะฝั (+1 / +5)

#### ะะพัะทะธะฝะฐ
- ะัะพัะผะพัั ัะพะฒะฐัะพะฒ ะธ ััะผะผั
- ะะทะผะตะฝะตะฝะธะต ะบะพะปะธัะตััะฒะฐ (+/-)
- ะฃะดะฐะปะตะฝะธะต ัะพะฒะฐัะพะฒ
- ะัะพะฒะตัะบะฐ ะผะธะฝะธะผะฐะปัะฝะพะน ััะผะผั ะทะฐะบะฐะทะฐ
- ะัะพะฒะตัะบะฐ ะพััะฐัะบะพะฒ ะฝะฐ ัะบะปะฐะดะต

#### ะัะพัะผะปะตะฝะธะต ะทะฐะบะฐะทะฐ

```
1. ะะฒะพะด ะฝะพะผะตัะฐ ัะตะปะตัะพะฝะฐ
   โ ะะฐะปะธะดะฐัะธั ัะพัะผะฐัะฐ

2. ะัะฑะพั ะดะพััะฐะฒะบะธ (CDEK)
   โ ะะพะธัะบ ะณะพัะพะดะฐ ะฟะพ ะฝะฐะทะฒะฐะฝะธั
   โ ะัะฑะพั ะฟัะฝะบัะฐ ะฒัะดะฐัะธ (ะะะ)
   โ ะะดัะตั, ัะตะถะธะผ ัะฐะฑะพัั, ะผะตััะพ

3. ะะพะดัะฒะตัะถะดะตะฝะธะต ะทะฐะบะฐะทะฐ
   โ ะะตะฝะตัะฐัะธั PDF-ััััะฐ
   โ ะะฐะฟะธัั ะฒ Google Sheets
   โ ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฟะธัะฐะฝะธะต ัะพ ัะบะปะฐะดะฐ
   โ ะัะฟัะฐะฒะบะฐ ััััะฐ ะฟะพะปัะทะพะฒะฐัะตะปั
```

#### AI-ะผะตะฝะตะดะถะตั

ะััะตััะฒะตะฝะฝะพ-ัะทัะบะพะฒะพะน ะธะฝัะตััะตะนั ะฝะฐ ะฑะฐะทะต OpenAI:

```
ะะพะปัะทะพะฒะฐัะตะปั: "ััะพ ะตััั?"
AI: ะะพะบะฐะทัะฒะฐะตั ะบะฐัะฐะปะพะณ ัะพะฒะฐัะพะฒ

ะะพะปัะทะพะฒะฐัะตะปั: "ะดะพะฑะฐะฒั 3 ะผะฐัะพัะบะธ ะกะกะกะ"
AI: ะะพะฑะฐะฒะปัะตั ะฒ ะบะพัะทะธะฝั

ะะพะปัะทะพะฒะฐัะตะปั: "ัะบะพะปัะบะพ ะฒัะตะณะพ?"
AI: ะะพะบะฐะทัะฒะฐะตั ััะผะผั ะบะพัะทะธะฝั
```

### ะะฝัะตะณัะฐัะธะธ

| ะกะตัะฒะธั | ะัะฟะพะปัะทะพะฒะฐะฝะธะต |
|--------|---------------|
| Google Sheets | ะะฐัะฐะปะพะณ, ะทะฐะบะฐะทั, ัะฟะธัะฐะฝะธั |
| CDEK API v2 | ะะพะธัะบ ะณะพัะพะดะพะฒ ะธ ะะะ |
| OpenAI API | AI-ะผะตะฝะตะดะถะตั (GPT-4) |

---

## 3. Google Sheets โ ะกัััะบัััะฐ ะดะฐะฝะฝัั

### ะะธัั "ะกะบะปะฐะด"

| ะะพะปะพะฝะบะฐ | ะขะธะฟ | ะะฟะธัะฐะฝะธะต |
|---------|-----|----------|
| SKU | string | ะฃะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั (PRD-YYYYMMDD-XXXX) |
| ะะฐะธะผะตะฝะพะฒะฐะฝะธะต | string | ะะฐะทะฒะฐะฝะธะต ัะพะฒะฐัะฐ |
| ะะฟะธัะฐะฝะธะต_ะบัะฐัะบะพ | string | ะัะฐัะบะพะต ะพะฟะธัะฐะฝะธะต |
| ะะฟะธัะฐะฝะธะต_ะฟะพะปะฝะพะต | string | ะะพะปะฝะพะต ะพะฟะธัะฐะฝะธะต |
| ะฆะตะฝะฐ_ััะฑ | number | ะฆะตะฝะฐ ะฒ ััะฑะปัั |
| ะกัะฐััะพะฒัะน_ะพััะฐัะพะบ | number | ะะฐัะฐะปัะฝัะน ะพััะฐัะพะบ |
| ะะฝะตัะตะฝะพ_ะฒัะตะณะพ | number | ะัะตะณะพ ะฟะพัััะฟะธะปะพ |
| ะกะฟะธัะฐะฝะพ_ะฒัะตะณะพ | number | ะัะตะณะพ ัะฟะธัะฐะฝะพ |
| ะััะฐัะพะบ_ัะฐััะตั | number | ะขะตะบััะธะน ะพััะฐัะพะบ (ัะฐััััะฝัะน) |
| ะะพััะฐะฒัะธะบ_ID | string | ID ะฟะพััะฐะฒัะธะบะฐ |
| ะคะพัะพ_URL | url | ะกััะปะบะฐ ะฝะฐ ัะพัะพ ะฒ Drive |
| ะะบัะธะฒะตะฝ | boolean | ะดะฐ/ะฝะตั |
| ะขะตะณะธ | string | ะขะตะณะธ ัะตัะตะท ะทะฐะฟัััั |

### ะะธัั "ะะฐะบะฐะทั"

| ะะพะปะพะฝะบะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| order_id | ะฃะฝะธะบะฐะปัะฝัะน ID ะทะฐะบะฐะทะฐ |
| user_id | Telegram ID ะฟะพะบัะฟะฐัะตะปั |
| phone | ะขะตะปะตัะพะฝ |
| delivery | ะกะฟะพัะพะฑ ะดะพััะฐะฒะบะธ |
| pickup_point | ะะดัะตั ะะะ |
| items | ะขะพะฒะฐัั (JSON) |
| total_rub | ะกัะผะผะฐ ะทะฐะบะฐะทะฐ |
| created_at | ะะฐัะฐ ัะพะทะดะฐะฝะธั |

### ะะธัั "ะกะฟะธัะฐะฝะธะต"

| ะะพะปะพะฝะบะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| order_id | ID ะทะฐะบะฐะทะฐ |
| sku | SKU ัะพะฒะฐัะฐ |
| qty | ะะพะปะธัะตััะฒะพ |
| created_at | ะะฐัะฐ ัะฟะธัะฐะฝะธั |

---

## 4. ะะพะฝัะธะณััะฐัะธั

### Owner Bot (`.env`)

```bash
# Telegram
TELEGRAM_BOT_TOKEN=8015984812:AAH...
OWNER_TELEGRAM_IDS=481890  # ะงะตัะตะท ะทะฐะฟัััั ะดะปั ะฝะตัะบะพะปัะบะธั

# Google
GOOGLE_SHEETS_ID=1r9rpm7WF1tAjPud8Dhpgsz...
GOOGLE_SERVICE_ACCOUNT_JSON_PATH=/path/to/service-account.json
DRIVE_FOLDER_ID=1BlVN_L21bhax8aFFVnThDoh...

# ะะฐัััะพะนะบะธ ัะพัะพ
PHOTO_MIN_SIZE=800
PHOTO_SHARPNESS_THRESHOLD=100.0
PHOTO_BRIGHTNESS_MIN=40
PHOTO_BRIGHTNESS_MAX=220

# ะัะธะปะพะถะตะฝะธะต
LOG_LEVEL=INFO
TIMEZONE=Europe/Vilnius
```

### Shop Bot (`.env`)

```bash
# Telegram
TELEGRAM_BOT_TOKEN=8384232147:AAF...

# Google
GOOGLE_SHEETS_ID=1r9rpm7WF1tAjPud8Dhpgsz...
GOOGLE_SERVICE_ACCOUNT_JSON_PATH=/path/to/service-account.json

# OpenAI (ะดะปั AI-ะผะตะฝะตะดะถะตัะฐ)
OPENAI_API_KEY=sk-proj-...
OPENAI_MODEL=gpt-4o

# CDEK (ะพะฟัะธะพะฝะฐะปัะฝะพ)
CDEK_CLIENT_ID=...
CDEK_CLIENT_SECRET=...
CDEK_TEST_MODE=true
CDEK_DEMO_MODE=true  # ะะตะผะพ-ัะตะถะธะผ ะฑะตะท ัะตะฐะปัะฝัั ะทะฐะฟัะพัะพะฒ

# ะะฒัะพัะฟะธัะฐะฝะธะต
AUTO_WRITE_SPISANIE=true
```

---

## 5. ะะฐะฟััะบ

### ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ

```bash
# Owner Bot
cd owner_bot
cp .env.example .env
# ะะฐะฟะพะปะฝะธัั .env
source .venv/bin/activate
python -m app.main

# Shop Bot (ะฒ ะพัะดะตะปัะฝะพะผ ัะตัะผะธะฝะฐะปะต)
cd ..
cp .env.example .env
# ะะฐะฟะพะปะฝะธัั .env
source .venv/bin/activate
python -m app.main
```

### Docker

```bash
docker compose up --build
```

---

## 6. ะกัะฐัััั ััะฝะบัะธะน

### Owner Bot

| ะคัะฝะบัะธั | ะกัะฐััั |
|---------|--------|
| ะัััััะน ะฟะฐััะธะฝะณ ะฟัะธัะพะดะพะฒ | โ ะะฐะฑะพัะฐะตั |
| ะะพะธัะบ ัะพะฒะฐัะพะฒ | โ ะะฐะฑะพัะฐะตั |
| ะกะพะทะดะฐะฝะธะต ัะพะฒะฐัะพะฒ | โ ะะฐะฑะพัะฐะตั |
| ะะฑะฝะพะฒะปะตะฝะธะต ะพััะฐัะบะพะฒ | โ ะะฐะฑะพัะฐะตั |
| ะะฐะณััะทะบะฐ ัะพัะพ | โ ะะฐะฑะพัะฐะตั |
| ะะฝะฐะปะธะท ะบะฐัะตััะฒะฐ ัะพัะพ | โ ะะฐะฑะพัะฐะตั |
| ะฃะปัััะตะฝะธะต ัะพัะพ | โ ะะฐะฑะพัะฐะตั |
| ะะบัะธะฒะฐัะธั/ะดะตะฐะบัะธะฒะฐัะธั | โ ะะฐะฑะพัะฐะตั |
| ะะธะฐะณะฝะพััะธะบะฐ ัะธััะตะผั | โ ะะฐะฑะพัะฐะตั |
| ะะฐะบะฐะทั ัะตะณะพะดะฝั | ๐ง ะ ัะฐะทัะฐะฑะพัะบะต |

### Shop Bot

| ะคัะฝะบัะธั | ะกัะฐััั |
|---------|--------|
| ะะฐัะฐะปะพะณ ั ัะพัะพ | โ ะะฐะฑะพัะฐะตั |
| ะะฐัะตะณะพัะธะธ | โ ะะฐะฑะพัะฐะตั |
| ะะพะธัะบ | โ ะะฐะฑะพัะฐะตั |
| ะะพัะทะธะฝะฐ | โ ะะฐะฑะพัะฐะตั |
| ะัะพัะผะปะตะฝะธะต ะทะฐะบะฐะทะฐ | โ ะะฐะฑะพัะฐะตั |
| PDF ััะตัะฐ | โ ะะฐะฑะพัะฐะตั |
| CDEK ะธะฝัะตะณัะฐัะธั | โ ะะฐะฑะพัะฐะตั |
| AI-ะผะตะฝะตะดะถะตั | โ ะะฐะฑะพัะฐะตั |
| ะะฒัะพัะฟะธัะฐะฝะธะต | โ ะะฐะฑะพัะฐะตั |
| ะััะพัะธั ะทะฐะบะฐะทะพะฒ | โ ะะฐะฑะพัะฐะตั |

---

## 7. ะกััะปะบะธ

| ะะตัััั | URL |
|--------|-----|
| Owner Bot | https://t.me/tophitboss_bot |
| Shop Bot | https://t.me/agrosna1b_bot |
| Google Sheets | https://docs.google.com/spreadsheets/d/1r9rpm7WF1tAjPud8DhpgszpPQNVhfforh1XXyKNuR9A |
| Google Drive (ัะพัะพ) | https://drive.google.com/drive/folders/1BlVN_L21bhax8aFFVnThDohHLXRpR87Z |
